process {
    executor='slurm'
    queue="$SCXA_HPC_QUEUE"
    // clusterOptions="$SCXA_HPC_OPTIONS"
    time = '7 d'
    memory = '4 GB'
    queueSize=500
    exitReadTimeout='100000 sec'
    pollInterval = '5sec'
    // error strategy
    // errorStrategy = { task.exitStatus in 137..140 ? 'retry' : 'terminate' }
    // memory = { 4.GB * 2 ^task.attempt }
    // maxRetries = 4
}

singularity {
    enabled = true
    cacheDir = "$SCXA_SINGULARITY_CACHE"
}

conda {
    // cacheDir = "$SCXA_WORKFLOW_ROOT/envs"
    createTimeout = "30 min"
    useMamba = true
}

params {
    dir_path = "."
    output_path = null
    result_dir_path = "${params.output_path ?: params.dir_path + '/results'}"
}

trace {
    enabled = true
    file = "${params.result_dir_path}/trace.txt"
    overwrite = true
}

timeline {
    enabled = true
    file = "${params.result_dir_path}/timeline.html"
    overwrite = true
}

report {
    enabled = true
    file = "${params.result_dir_path}/report.html"
    overwrite = true
}
